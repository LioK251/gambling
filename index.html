<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>CASINO FINAL V3</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&display=swap');

        :root {
            --gold: #ffd700;
            --green: #00ff41;
            --red: #ff3333;
            --blue: #00ccff;
            --dark: #111111;
            --panel: #1a1a1a;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: #050505;
            color: #fff;
            font-family: 'Roboto Mono', monospace;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden;
            user-select: none;
        }

        /* --- HEADER --- */
        header {
            width: 100%;
            padding: 15px;
            background: rgba(20, 20, 20, 0.9);
            border-bottom: 2px solid var(--gold);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky; top: 0; z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .balance {
            color: var(--gold);
            font-size: 1.2rem;
            border: 1px solid var(--gold);
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }

        /* --- NAV --- */
        .nav-scroller {
            width: 100%;
            overflow-x: auto;
            background: var(--panel);
            padding: 10px;
            display: flex;
            gap: 10px;
            justify-content: flex-start; /* –î–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
        }
        
        .nav-btn {
            background: #333;
            color: #aaa;
            padding: 10px 15px;
            border-radius: 8px;
            white-space: nowrap;
            cursor: pointer;
            transition: 0.3s;
            border: 1px solid #444;
        }
        .nav-btn.active {
            background: var(--gold);
            color: #000;
            font-weight: bold;
            box-shadow: 0 0 15px var(--gold);
        }

        /* --- GAME AREA --- */
        .game-wrapper {
            flex: 1;
            width: 100%;
            max-width: 600px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .game-screen {
            display: none;
            animation: fadeIn 0.4s ease;
        }
        .game-screen.active { display: block; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h2 { text-align: center; color: var(--gold); margin-top: 0; text-shadow: 0 0 10px rgba(255,215,0,0.3); }

        /* --- CONTROLS --- */
        .controls {
            background: var(--panel);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid #333;
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group { display: flex; justify-content: center; align-items: center; gap: 10px; }
        label { color: #ccc; }
        input[type="number"] {
            background: #000; border: 1px solid #555; color: #fff;
            padding: 10px; border-radius: 5px; width: 80px; text-align: center; font-size: 1rem;
        }

        .main-btn {
            background: linear-gradient(to bottom, var(--green), #00aa00);
            color: #000;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            box-shadow: 0 4px 0 #006600;
            transition: transform 0.1s;
        }
        .main-btn:active { transform: translateY(4px); box-shadow: none; }
        .main-btn:disabled { background: #555; box-shadow: none; cursor: not-allowed; opacity: 0.7; }

        .cashout-btn {
            background: linear-gradient(to bottom, var(--gold), #ccaa00);
            box-shadow: 0 4px 0 #997700;
        }

        .msg-box { text-align: center; height: 20px; color: #aaa; margin-bottom: 5px; }

        /* === SLOTS STYLES === */
        .slot-machine {
            display: flex; justify-content: center; gap: 10px;
            background: #000; padding: 20px; border-radius: 15px; border: 3px solid var(--gold);
        }
        .reel {
            width: 70px; height: 100px; background: #fff; color: #000;
            font-size: 50px; display: flex; align-items: center; justify-content: center;
            border-radius: 8px; border: 2px solid #555; overflow: hidden;
        }
        .reel.blur { filter: blur(3px); background: #ddd; }

        /* === MINES STYLES === */
        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .tile {
            aspect-ratio: 1; background: #2d2d35; border-radius: 6px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; font-size: 24px;
            border-bottom: 3px solid #1a1a20; transition: 0.2s;
        }
        .tile:hover { filter: brightness(1.2); }
        .tile.revealed { background: #111; border-bottom: 0; cursor: default; }
        .tile.gem { background: #002200; border: 1px solid var(--green); }
        .tile.boom { background: #220000; border: 1px solid var(--red); }

        /* === STAIRS STYLES === */
        .stairs-box { display: flex; flex-direction: column-reverse; gap: 5px; }
        .s-row { display: flex; justify-content: center; gap: 10px; opacity: 0.3; pointer-events: none; transition: 0.3s; }
        .s-row.active { opacity: 1; pointer-events: all; transform: scale(1.02); }
        .s-btn {
            width: 50px; height: 40px; background: #333; border: 1px solid #555;
            border-radius: 5px; cursor: pointer; display: flex; align-items: center; justify-content: center;
        }
        .s-btn.win { background: var(--green); color: black; }
        .s-btn.lose { background: var(--red); }

        /* === ROCKET STYLES === */
        .rocket-area {
            height: 250px; background: #0a0a15; border: 2px solid #333; border-radius: 10px;
            position: relative; overflow: hidden;
        }
        .rocket-obj { font-size: 40px; position: absolute; bottom: 10px; left: 10px; transition: 0.1s linear; }
        .crash-text {
            position: absolute; width: 100%; top: 40%; text-align: center;
            font-size: 3rem; font-weight: bold; z-index: 10;
        }

        /* === PLINKO STYLES === */
        .plinko-board {
            background: #111; padding: 10px; border-radius: 10px; border: 1px solid #333;
            position: relative; height: 300px; overflow: hidden;
        }
        .plinko-ball {
            width: 12px; height: 12px; background: var(--gold); border-radius: 50%;
            position: absolute; top: 0; left: 50%; z-index: 10; display: none;
            box-shadow: 0 0 8px var(--gold);
        }
        .peg-row { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; }
        .peg { width: 6px; height: 6px; background: white; border-radius: 50%; }
        .plinko-slots {
            position: absolute; bottom: 5px; left: 0; width: 100%;
            display: flex; gap: 2px; padding: 0 5px;
        }
        .p-slot {
            flex: 1; text-align: center; font-size: 0.7rem; padding: 5px 0;
            background: #222; border-radius: 3px; color: #fff;
        }
        .p-slot.hit { background: var(--gold); color: black; transform: scale(1.1); }

        /* === WHEEL STYLES === */
        .wheel-wrap { position: relative; width: 280px; height: 280px; margin: 0 auto; }
        .wheel {
            width: 100%; height: 100%; border-radius: 50%; border: 5px solid #333;
            transition: transform 4s cubic-bezier(0.1, 0.7, 0.1, 1);
            background: conic-gradient(
                #ff3333 0deg 24deg, #111 24deg 48deg,
                #ff3333 48deg 72deg, #111 72deg 96deg,
                #ff3333 96deg 120deg, #111 120deg 144deg,
                #ff3333 144deg 168deg, #111 168deg 192deg,
                #ff3333 192deg 216deg, #111 216deg 240deg,
                #ff3333 240deg 264deg, #111 264deg 288deg,
                #ff3333 288deg 312deg, #111 312deg 336deg,
                #ffd700 336deg 360deg
            );
        }
        .arrow {
            position: absolute; top: -10px; left: 50%; transform: translateX(-50%);
            width: 0; height: 0; border-left: 10px solid transparent;
            border-right: 10px solid transparent; border-top: 20px solid white; z-index: 5;
        }
        .wheel-colors { display: flex; gap: 5px; margin-top: 10px; }
        .c-btn { flex: 1; padding: 10px; border: none; cursor: pointer; color: white; font-weight: bold; border-radius: 5px; }
        .c-btn.selected { outline: 3px solid white; }

    </style>
</head>
<body>

<header>
    <div style="font-weight:bold; color:var(--gold);">ü¶Å GRAND CASINO</div>
    <div class="balance">$<span id="bal">5000</span></div>
</header>

<div class="nav-scroller">
    <div class="nav-btn active" onclick="setGame('slots', this)">–°–õ–û–¢–´</div>
    <div class="nav-btn" onclick="setGame('mines', this)">–ú–ò–ù–´</div>
    <div class="nav-btn" onclick="setGame('stairs', this)">–ë–ê–®–ù–Ø</div>
    <div class="nav-btn" onclick="setGame('rocket', this)">–†–ê–ö–ï–¢–ê</div>
    <div class="nav-btn" onclick="setGame('plinko', this)">–ü–õ–ò–ù–ö–û</div>
    <div class="nav-btn" onclick="setGame('wheel', this)">–ö–û–õ–ï–°–û</div>
</div>

<div class="game-wrapper">

    <div id="g-slots" class="game-screen active">
        <h2>777 SLOTS</h2>
        <div class="slot-machine">
            <div class="reel" id="sl-1">7</div>
            <div class="reel" id="sl-2">7</div>
            <div class="reel" id="sl-3">7</div>
        </div>
        <div class="controls">
            <div class="msg-box" id="msg-slots">–ë–∞–ª–∞–Ω—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω</div>
            <button class="main-btn" onclick="spinSlots()">–ö–†–£–¢–ò–¢–¨ (50$)</button>
        </div>
    </div>

    <div id="g-mines" class="game-screen">
        <h2>MINESWEEPER</h2>
        <div class="mines-grid" id="m-grid"></div>
        <div class="controls">
            <div class="input-group">
                <label>–°—Ç–∞–≤–∫–∞:</label><input type="number" id="m-bet" value="100">
                <label>–ú–∏–Ω—ã:</label><input type="number" id="m-cnt" value="3" max="24">
            </div>
            <div class="msg-box" id="msg-mines">–ù–∞–π–¥–∏ –∞–ª–º–∞–∑—ã</div>
            <button class="main-btn" id="btn-m-start" onclick="startMines()">–ò–ì–†–ê–¢–¨</button>
            <button class="main-btn cashout-btn" id="btn-m-cash" onclick="cashMines()" style="display:none;">–ó–ê–ë–†–ê–¢–¨</button>
        </div>
    </div>

    <div id="g-stairs" class="game-screen">
        <h2>TOWER</h2>
        <div class="stairs-box" id="s-grid"></div>
        <div class="controls">
            <div class="input-group">
                <label>–°—Ç–∞–≤–∫–∞:</label><input type="number" id="s-bet" value="100">
            </div>
            <div class="msg-box" id="msg-stairs">–õ–µ–∑—å –Ω–∞–≤–µ—Ä—Ö</div>
            <button class="main-btn" id="btn-s-start" onclick="startStairs()">–°–¢–ê–†–¢</button>
            <button class="main-btn cashout-btn" id="btn-s-cash" onclick="cashStairs()" style="display:none;">–ó–ê–ë–†–ê–¢–¨</button>
        </div>
    </div>

    <div id="g-rocket" class="game-screen">
        <h2>CRASH ROCKET</h2>
        <div class="rocket-area">
            <div class="rocket-obj" id="r-obj">üöÄ</div>
            <div class="crash-text" id="r-text">1.00x</div>
        </div>
        <div class="controls">
            <div class="input-group">
                <label>–°—Ç–∞–≤–∫–∞:</label><input type="number" id="r-bet" value="100">
            </div>
            <button class="main-btn" id="btn-r-start" onclick="startRocket()">–ó–ê–ü–£–°–ö</button>
            <button class="main-btn cashout-btn" id="btn-r-cash" onclick="cashRocket()" style="display:none;">–°–¢–û–ü</button>
        </div>
    </div>

    <div id="g-plinko" class="game-screen">
        <h2>PLINKO</h2>
        <div class="plinko-board" id="p-board">
            <div class="plinko-ball" id="p-ball"></div>
            <div style="margin-top:20px;">
                <div class="peg-row"><div class="peg"></div></div>
                <div class="peg-row"><div class="peg"></div><div class="peg"></div></div>
                <div class="peg-row"><div class="peg"></div><div class="peg"></div><div class="peg"></div></div>
                <div class="peg-row"><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div></div>
                <div class="peg-row"><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div></div>
                <div class="peg-row"><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div><div class="peg"></div></div>
            </div>
            <div class="plinko-slots" id="p-slots">
                </div>
        </div>
        <div class="controls">
            <div class="input-group">
                <label>–°—Ç–∞–≤–∫–∞:</label><input type="number" id="p-bet" value="100">
            </div>
            <div class="msg-box" id="msg-plinko">–ö–∏–¥–∞–π —à–∞—Ä</div>
            <button class="main-btn" id="btn-p-drop" onclick="dropPlinko()" style="background:var(--blue);">–ë–†–û–°–û–ö</button>
        </div>
    </div>

    <div id="g-wheel" class="game-screen">
        <h2>WHEEL</h2>
        <div class="wheel-wrap">
            <div class="arrow"></div>
            <div class="wheel" id="w-wheel"></div>
        </div>
        <div class="controls">
            <div class="input-group">
                <label>–°—Ç–∞–≤–∫–∞:</label><input type="number" id="w-bet" value="100">
            </div>
            <div class="wheel-colors">
                <button class="c-btn" style="background:#ff3333" onclick="selColor('red', this)">x2</button>
                <button class="c-btn" style="background:#333" onclick="selColor('black', this)">x2</button>
                <button class="c-btn" style="background:gold; color:black" onclick="selColor('gold', this)">x14</button>
            </div>
            <div class="msg-box" id="msg-wheel">–í—ã–±–µ—Ä–∏ —Ü–≤–µ—Ç</div>
            <button class="main-btn" id="btn-w-spin" onclick="spinWheel()" disabled>–í–†–ê–©–ê–¢–¨</button>
        </div>
    </div>

</div>

<script>
    /* --- SYSTEM --- */
    let money = parseInt(localStorage.getItem('myCasinoMoney'));
    if(isNaN(money)) money = 5000;
    
    const uiBal = document.getElementById('bal');
    
    function updBal(amount) {
        money += amount;
        localStorage.setItem('myCasinoMoney', money);
        uiBal.innerText = money;
    }
    updBal(0);

    function setGame(id, btn) {
        document.querySelectorAll('.game-screen').forEach(e => e.classList.remove('active'));
        document.getElementById('g-'+id).classList.add('active');
        document.querySelectorAll('.nav-btn').forEach(e => e.classList.remove('active'));
        if(btn) btn.classList.add('active');
    }

    /* --- SLOTS --- */
    const syms = ['üçí','üçã','üçá','üíé','7'];
    function spinSlots() {
        if(money < 50) return alert('–ù–µ—Ç –¥–µ–Ω–µ–≥!');
        updBal(-50);
        
        const r1 = document.getElementById('sl-1');
        const r2 = document.getElementById('sl-2');
        const r3 = document.getElementById('sl-3');
        const msg = document.getElementById('msg-slots');

        [r1,r2,r3].forEach(r => { r.innerText='?'; r.classList.add('blur'); });
        msg.innerText = "–ö—Ä—É—Ç–∏–º...";

        setTimeout(() => {
            const res = [
                syms[Math.floor(Math.random()*syms.length)],
                syms[Math.floor(Math.random()*syms.length)],
                syms[Math.floor(Math.random()*syms.length)]
            ];

            r1.innerText=res[0]; r1.classList.remove('blur');
            r2.innerText=res[1]; r2.classList.remove('blur');
            r3.innerText=res[2]; r3.classList.remove('blur');

            let win = 0;
            if(res[0]==res[1] && res[1]==res[2]) {
                if(res[0]=='7') win=2000;
                else if(res[0]=='üíé') win=1000;
                else win=200;
            } else if(res[0]==res[1] || res[1]==res[2] || res[0]==res[2]) win=20;

            if(win>0) { updBal(win); msg.innerText=`–í–´–ò–ì–†–´–®: ${win}$`; msg.style.color='lime'; }
            else { msg.innerText="–ü—É—Å—Ç–æ"; msg.style.color='#aaa'; }
        }, 800);
    }

    /* --- MINES --- */
    let mGame = false;
    let mData = [];
    let mBet = 0;
    let mOpened = 0;
    let mMines = 3;

    function startMines() {
        if(mGame) return;
        mBet = parseInt(document.getElementById('m-bet').value);
        mMines = parseInt(document.getElementById('m-cnt').value);
        if(mBet > money || mBet <= 0) return alert('–°—Ç–∞–≤–∫–∞?');
        
        updBal(-mBet);
        mGame = true; mOpened = 0;
        document.getElementById('btn-m-start').style.display='none';
        document.getElementById('btn-m-cash').style.display='inline-block';
        document.getElementById('msg-mines').innerText = "–ò—â–∏ –∞–ª–º–∞–∑—ã!";
        
        const grid = document.getElementById('m-grid');
        grid.innerHTML = '';
        mData = Array(25).fill(0);
        let set = 0;
        while(set < mMines) {
            let i = Math.floor(Math.random()*25);
            if(mData[i]===0) { mData[i]=1; set++; }
        }

        for(let i=0; i<25; i++) {
            let t = document.createElement('div');
            t.className = 'tile';
            t.onclick = function() { checkMine(i, t); };
            grid.appendChild(t);
        }
    }

    function checkMine(idx, el) {
        if(!mGame || el.classList.contains('revealed')) return;
        el.classList.add('revealed');
        
        if(mData[idx]===1) {
            el.innerHTML = 'üí£'; el.classList.add('boom');
            endMines(false);
        } else {
            el.innerHTML = 'üíé'; el.classList.add('gem');
            mOpened++;
            let multi = 1 + (mOpened * mMines * 0.05); // –ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º—É–ª–∞
            let win = Math.floor(mBet * multi);
            document.getElementById('btn-m-cash').innerText = `–ó–ê–ë–†–ê–¢–¨ ${win}$`;
        }
    }

    function cashMines() {
        if(!mGame) return;
        let multi = 1 + (mOpened * mMines * 0.05);
        updBal(Math.floor(mBet * multi));
        endMines(true);
    }

    function endMines(won) {
        mGame = false;
        document.getElementById('btn-m-start').style.display='inline-block';
        document.getElementById('btn-m-cash').style.display='none';
        document.getElementById('msg-mines').innerText = won ? "–ü–û–ë–ï–î–ê" : "–í–ó–†–´–í";
        // Show bombs
        const tiles = document.getElementById('m-grid').children;
        for(let i=0; i<25; i++) {
            if(mData[i]===1) tiles[i].innerHTML = 'üí£';
        }
    }

    /* --- STAIRS --- */
    let sLevel = 0; let sGame = false; let sBet = 0;
    
    function startStairs() {
        if(sGame) return;
        sBet = parseInt(document.getElementById('s-bet').value);
        if(sBet > money || sBet <= 0) return alert('–°—Ç–∞–≤–∫–∞?');
        updBal(-sBet);
        
        sGame = true; sLevel = 0;
        document.getElementById('btn-s-start').style.display='none';
        document.getElementById('btn-s-cash').style.display='inline-block';
        document.getElementById('btn-s-cash').innerText='–ó–ê–ë–†–ê–¢–¨';

        const grid = document.getElementById('s-grid');
        grid.innerHTML = '';
        for(let r=0; r<7; r++) {
            let row = document.createElement('div');
            row.className = 's-row';
            if(r===0) row.classList.add('active');
            let bomb = Math.floor(Math.random()*3);
            for(let c=0; c<3; c++) {
                let b = document.createElement('div');
                b.className='s-btn'; b.innerText='‚ùì';
                b.onclick = () => clickStair(r, c, bomb, b, row);
                row.appendChild(b);
            }
            grid.appendChild(row);
        }
    }

    function clickStair(r, c, bomb, btn, row) {
        if(!sGame || r !== sLevel) return;
        
        if(c === bomb) {
            btn.innerText='üóø'; btn.classList.add('lose');
            endStairs(false);
        } else {
            btn.innerText='üí∞'; btn.classList.add('win');
            sLevel++;
            let multi = Math.pow(1.5, sLevel);
            document.getElementById('btn-s-cash').innerText = `–ó–ê–ë–†–ê–¢–¨ ${Math.floor(sBet*multi)}$`;
            row.classList.remove('active');
            
            // Activate next row up (in flex-reverse, next in DOM is confusing, simpler logic:)
            const rows = document.getElementById('s-grid').children;
            // Rows added 0..6. In DOM: 0 is top, 6 is bottom? 
            // appendChild adds to end. Flex reverse flips.
            // visual bottom is DOM lastChild.
            // Let's rely on stored children. Child[6] is bottom. Child[0] is top.
            // Current level 0 = Child[6]. Level 1 = Child[5].
            let nextRowIdx = 6 - sLevel;
            if(nextRowIdx >= 0) {
                rows[nextRowIdx].classList.add('active');
            } else {
                cashStairs();
            }
        }
    }

    function cashStairs() {
        if(!sGame) return;
        let multi = Math.pow(1.5, sLevel);
        if(sLevel===0) multi=0;
        updBal(Math.floor(sBet*multi));
        endStairs(true);
    }
    
    function endStairs(w) {
        sGame=false;
        document.getElementById('btn-s-start').style.display='inline-block';
        document.getElementById('btn-s-cash').style.display='none';
    }

    /* --- ROCKET --- */
    let rFly = false; let rBet = 0; let rMulti = 1.00; let rInt;
    
    function startRocket() {
        if(rFly) return;
        rBet = parseInt(document.getElementById('r-bet').value);
        if(rBet>money || rBet<=0) return alert('–°—Ç–∞–≤–∫–∞?');
        updBal(-rBet);
        rFly = true; rMulti = 1.00;
        
        document.getElementById('btn-r-start').style.display='none';
        document.getElementById('btn-r-cash').style.display='inline-block';
        document.getElementById('r-obj').style.left='10px';
        document.getElementById('r-obj').style.bottom='10px';
        document.getElementById('r-obj').innerText='üöÄ';
        document.getElementById('r-text').style.color='white';
        
        let crash = 1 + Math.random()*5; // Simple crash logic
        if(Math.random() < 0.1) crash = 1.0; // Instant crash chance
        
        rInt = setInterval(() => {
            rMulti += 0.01;
            document.getElementById('r-text').innerText = rMulti.toFixed(2)+'x';
            
            // Anim
            let p = Math.min((rMulti-1)*20, 90);
            document.getElementById('r-obj').style.bottom = (10+p)+'%';
            document.getElementById('r-obj').style.left = (10+p)+'%';
            
            if(rMulti >= crash) {
                clearInterval(rInt);
                rFly = false;
                document.getElementById('r-text').style.color='red';
                document.getElementById('r-text').innerText='CRASH @ '+crash.toFixed(2)+'x';
                document.getElementById('r-obj').innerText='üí•';
                document.getElementById('btn-r-start').style.display='inline-block';
                document.getElementById('btn-r-cash').style.display='none';
            }
        }, 50);
    }

    function cashRocket() {
        if(!rFly) return;
        clearInterval(rInt);
        rFly = false;
        updBal(Math.floor(rBet*rMulti));
        document.getElementById('r-text').style.color='lime';
        document.getElementById('r-text').innerText='WIN: '+rMulti.toFixed(2)+'x';
        document.getElementById('btn-r-start').style.display='inline-block';
        document.getElementById('btn-r-cash').style.display='none';
    }

    /* --- PLINKO (SIMPLIFIED) --- */
    const pMults = [5, 2, 1, 0.5, 0.2, 0.5, 1, 2, 5];
    const pSlotDivs = document.getElementById('p-slots');
    pMults.forEach(m => {
        let d = document.createElement('div');
        d.className = 'p-slot'; d.innerText = 'x'+m;
        // Color coding
        if(m>=2) d.style.background='#440000';
        else if(m<1) d.style.background='#002200';
        pSlotDivs.appendChild(d);
    });

    function dropPlinko() {
        let pb = parseInt(document.getElementById('p-bet').value);
        if(pb > money) return alert('–î–µ–Ω–µ–≥ –Ω–µ—Ç');
        updBal(-pb);
        
        let ball = document.getElementById('p-ball');
        let btn = document.getElementById('btn-p-drop');
        btn.disabled = true;
        
        ball.style.display = 'block';
        ball.style.top = '0px';
        ball.style.left = '50%';
        ball.style.transition = 'top 1s ease-in, left 1s linear';
        
        // Decide outcome instantly
        let slot = Math.floor(Math.random() * pMults.length);
        // Calculate visual percentage for Left
        // 9 slots. Index 0 is left (approx 10%), Index 4 center (50%), Index 8 right (90%)
        let targetLeft = 10 + (slot * 10); 
        
        // Small delay to allow browser render
        setTimeout(() => {
            ball.style.top = '280px';
            ball.style.left = targetLeft + '%';
        }, 50);

        setTimeout(() => {
            let m = pMults[slot];
            let win = Math.floor(pb * m);
            updBal(win);
            document.getElementById('msg-plinko').innerText = `x${m} | Win: ${win}`;
            
            pSlotDivs.children[slot].classList.add('hit');
            setTimeout(() => {
                pSlotDivs.children[slot].classList.remove('hit');
                ball.style.display='none';
                btn.disabled=false;
            }, 500);
        }, 1050);
    }

    /* --- WHEEL --- */
    let wColor = null;
    let wSpinning = false;
    
    function selColor(c, btn) {
        if(wSpinning) return;
        wColor = c;
        document.querySelectorAll('.c-btn').forEach(b => b.classList.remove('selected'));
        btn.classList.add('selected');
        document.getElementById('btn-w-spin').disabled = false;
    }

    function spinWheel() {
        if(wSpinning) return;
        let wb = parseInt(document.getElementById('w-bet').value);
        if(wb > money) return alert('–î–µ–Ω–µ–≥ –Ω–µ—Ç');
        updBal(-wb);
        
        wSpinning = true;
        document.getElementById('btn-w-spin').disabled = true;
        
        // Logic: 0-14. 14 is Gold. Even is Black, Odd is Red (simplified for 15 segs)
        // 15 Segments. 360/15 = 24 deg.
        let outcome = Math.floor(Math.random() * 15); 
        // 14 = Gold. 
        // 0,2,4,6,8,10,12 = Red? Let's match CSS gradient
        // CSS: Red, Black, Red, Black... Gold at end.
        let realColor = 'black';
        if(outcome === 14) realColor = 'gold';
        else if(outcome % 2 === 0) realColor = 'red';
        
        // Calculate deg
        let deg = 360 * 5 + (360 - (outcome * 24) - 12); // -12 to center
        
        const wheel = document.getElementById('w-wheel');
        wheel.style.transform = `rotate(${deg}deg)`;
        
        setTimeout(() => {
            let multi = 0;
            if(wColor === realColor) {
                if(realColor === 'gold') multi = 14;
                else multi = 2;
            }
            let win = wb * multi;
            if(win > 0) updBal(win);
            document.getElementById('msg-wheel').innerText = `–í—ã–ø–∞–ª–æ: ${realColor.toUpperCase()} | ${win}$`;
            
            wSpinning = false;
            wheel.style.transition = 'none';
            wheel.style.transform = 'rotate(0deg)';
            setTimeout(() => { wheel.style.transition = 'transform 4s cubic-bezier(0.1, 0.7, 0.1, 1)'; }, 50);
            document.getElementById('btn-w-spin').disabled = false;
        }, 4000);
    }

</script>
</body>
</html>
