<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ROYAL CASINO V5</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Rajdhani:wght@400;600;700&family=Space+Mono:wght@400;700&display=swap');

        :root {
            --bg-dark: #0d0d0d;
            --bg-panel: rgba(18, 18, 18, 0.95);
            --bg-card: rgba(25, 25, 25, 0.9);
            --bg-card-hover: rgba(35, 35, 35, 0.95);
            --gold: #f4c430;
            --gold-dark: #c9a227;
            --gold-glow: rgba(244, 196, 48, 0.4);
            --green: #39ff14;
            --green-dark: #2ed600;
            --green-glow: rgba(57, 255, 20, 0.3);
            --red: #ff3131;
            --red-dark: #cc2727;
            --red-glow: rgba(255, 49, 49, 0.3);
            --cyan: #00fff7;
            --cyan-glow: rgba(0, 255, 247, 0.3);
            --purple: #bf00ff;
            --purple-glow: rgba(191, 0, 255, 0.3);
            --text: #f5f5f5;
            --text-muted: #888;
            --border: rgba(255, 255, 255, 0.08);
            --border-active: rgba(244, 196, 48, 0.5);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Rajdhani', sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Animated background */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background: 
                radial-gradient(ellipse at 20% 0%, rgba(244, 196, 48, 0.05) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(191, 0, 255, 0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(0, 255, 247, 0.02) 0%, transparent 70%);
        }

        .bg-grid {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            background-image: 
                linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 20s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 900px;
            margin: 0 auto;
            padding: 0 12px;
        }

        /* HEADER */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: linear-gradient(180deg, rgba(13, 13, 13, 0.98) 0%, rgba(13, 13, 13, 0.95) 100%);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border);
            padding: 12px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(1.4rem, 5vw, 2rem);
            letter-spacing: 4px;
            background: linear-gradient(135deg, var(--gold), #fff 50%, var(--gold));
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s ease-in-out infinite;
            text-shadow: 0 0 30px var(--gold-glow);
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .balance-display {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.1), rgba(57, 255, 20, 0.02));
            border: 1px solid rgba(57, 255, 20, 0.3);
            border-radius: 30px;
            padding: 8px 16px;
            position: relative;
            overflow: hidden;
        }

        .balance-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(57, 255, 20, 0.1), transparent);
            animation: balanceShine 3s ease-in-out infinite;
        }

        @keyframes balanceShine {
            0% { left: -100%; }
            50%, 100% { left: 100%; }
        }

        .balance-icon {
            font-size: 1.2rem;
        }

        .balance-amount {
            font-family: 'Space Mono', monospace;
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            font-weight: 700;
            color: var(--green);
        }

        .stats-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: var(--bg-panel);
            color: var(--text-muted);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stats-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
            transform: rotate(15deg);
        }

        /* NAVIGATION */
        nav {
            margin: 15px 0;
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        nav::-webkit-scrollbar {
            display: none;
        }

        .nav-wrapper {
            display: flex;
            gap: 8px;
            padding: 5px 0;
            min-width: min-content;
        }

        .nav-item {
            flex-shrink: 0;
            padding: 10px 18px;
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 25px;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .nav-item span {
            position: relative;
            z-index: 1;
        }

        .nav-item:hover {
            border-color: var(--border-active);
            color: var(--text);
            transform: translateY(-2px);
        }

        .nav-item.active {
            border-color: var(--gold);
            color: #000;
            box-shadow: 0 4px 20px var(--gold-glow);
        }

        .nav-item.active::before {
            opacity: 1;
        }

        /* GAME CONTAINER */
        .game-container {
            padding: 10px 0 30px;
            min-height: 60vh;
        }

        .game-scene {
            display: none;
            animation: sceneIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .game-scene.active {
            display: block;
        }

        @keyframes sceneIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* CARD COMPONENT */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            transition: all 0.3s;
        }

        .card:hover {
            border-color: rgba(255, 255, 255, 0.12);
        }

        .card-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.3rem;
            letter-spacing: 2px;
            color: var(--gold);
            margin-bottom: 15px;
            text-align: center;
        }

        /* BUTTONS */
        .btn {
            width: 100%;
            padding: 14px 20px;
            border: none;
            border-radius: 12px;
            font-family: 'Rajdhani', sans-serif;
            font-weight: 700;
            font-size: 1rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .btn:active::after {
            width: 200%;
            height: 200%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--green), var(--green-dark));
            color: #000;
            box-shadow: 0 4px 15px var(--green-glow);
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--green-glow);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: #000;
            box-shadow: 0 4px 15px var(--gold-glow);
        }

        .btn-secondary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px var(--gold-glow);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--red), var(--red-dark));
            color: #fff;
            box-shadow: 0 4px 15px var(--red-glow);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            transform: none !important;
        }

        /* INPUT */
        .input-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 12px 16px;
            margin-bottom: 12px;
            transition: all 0.3s;
        }

        .input-group:focus-within {
            border-color: var(--gold);
            box-shadow: 0 0 15px rgba(244, 196, 48, 0.1);
        }

        .input-group label {
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .input-group input {
            background: transparent;
            border: none;
            color: var(--text);
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            width: 100px;
            text-align: right;
            outline: none;
        }

        .quick-bets {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
        }

        .quick-bet {
            flex: 1;
            padding: 8px;
            background: var(--bg-panel);
            border: 1px solid var(--border);
            border-radius: 8px;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-bet:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        /* STATUS MESSAGE */
        .status-message {
            text-align: center;
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 0.95rem;
            animation: statusPop 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes statusPop {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .status-message.win {
            background: rgba(57, 255, 20, 0.1);
            color: var(--green);
            border: 1px solid rgba(57, 255, 20, 0.3);
        }

        .status-message.lose {
            background: rgba(255, 49, 49, 0.1);
            color: var(--red);
            border: 1px solid rgba(255, 49, 49, 0.3);
        }

        .status-message.info {
            background: rgba(0, 255, 247, 0.08);
            color: var(--cyan);
            border: 1px solid rgba(0, 255, 247, 0.2);
        }

        /* ======================= SLOTS ======================= */
        .slots-display {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.3));
            border-radius: 20px;
            border: 2px solid var(--gold);
            box-shadow: inset 0 0 50px rgba(244, 196, 48, 0.1);
        }

        .reel {
            width: 80px;
            height: 100px;
            background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
            border: 2px solid rgba(244, 196, 48, 0.5);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            position: relative;
            overflow: hidden;
            box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.8);
        }

        .reel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30%;
            background: linear-gradient(180deg, rgba(255,255,255,0.1), transparent);
            pointer-events: none;
        }

        .reel.spinning .reel-symbol {
            animation: reelSpin 0.08s steps(1) infinite;
        }

        .reel-symbol {
            transition: transform 0.2s;
        }

        @keyframes reelSpin {
            0% { transform: translateY(-5px); opacity: 0.7; }
            50% { transform: translateY(5px); opacity: 1; }
            100% { transform: translateY(-5px); opacity: 0.7; }
        }

        .reel.winner {
            animation: reelWin 0.5s ease-in-out;
            border-color: var(--green);
            box-shadow: 0 0 30px var(--green-glow);
        }

        @keyframes reelWin {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .slots-multiplier {
            text-align: center;
            font-family: 'Space Mono', monospace;
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-bottom: 15px;
        }

        .slots-multiplier span {
            color: var(--gold);
        }

        /* ======================= MINES ======================= */
        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            max-width: 350px;
            margin-left: auto;
            margin-right: auto;
        }

        .mine-tile {
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--bg-panel), rgba(30,30,30,0.8));
            border: 2px solid var(--border);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .mine-tile::before {
            content: '?';
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--text-muted);
            opacity: 0.3;
        }

        .mine-tile:hover:not(.revealed):not(.disabled) {
            transform: translateY(-3px);
            border-color: var(--cyan);
            box-shadow: 0 5px 20px var(--cyan-glow);
        }

        .mine-tile:hover:not(.revealed):not(.disabled)::before {
            opacity: 0.6;
        }

        .mine-tile.revealed::before {
            content: none;
        }

        .mine-tile.revealed {
            cursor: default;
            transform: rotateY(180deg);
            animation: tileReveal 0.4s ease-out;
        }

        @keyframes tileReveal {
            0% { transform: rotateY(0deg) scale(1); }
            50% { transform: rotateY(90deg) scale(0.9); }
            100% { transform: rotateY(180deg) scale(1); }
        }

        .mine-tile.gem {
            background: linear-gradient(135deg, rgba(57, 255, 20, 0.2), rgba(57, 255, 20, 0.05));
            border-color: var(--green);
            box-shadow: 0 0 25px var(--green-glow);
        }

        .mine-tile.bomb {
            background: linear-gradient(135deg, rgba(255, 49, 49, 0.2), rgba(255, 49, 49, 0.05));
            border-color: var(--red);
            box-shadow: 0 0 25px var(--red-glow);
            animation: bombExplode 0.5s ease-out;
        }

        @keyframes bombExplode {
            0% { transform: rotateY(180deg) scale(1); }
            30% { transform: rotateY(180deg) scale(1.3); }
            100% { transform: rotateY(180deg) scale(1); }
        }

        .mine-tile.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .mines-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
        }

        .mines-stat {
            text-align: center;
        }

        .mines-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .mines-stat-value {
            font-family: 'Space Mono', monospace;
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gold);
        }

        /* ======================= DICE ======================= */
        .dice-container {
            text-align: center;
            margin-bottom: 25px;
        }

        .dice-display {
            width: 130px;
            height: 130px;
            margin: 0 auto 20px;
            background: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            border: 3px solid var(--gold);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 3.5rem;
            color: var(--gold);
            box-shadow: 
                0 10px 40px rgba(244, 196, 48, 0.2),
                inset 0 2px 10px rgba(255,255,255,0.05);
            transition: all 0.3s;
        }

        .dice-display.rolling {
            animation: diceShake 0.1s ease-in-out infinite;
        }

        @keyframes diceShake {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            25% { transform: translate(-3px, -3px) rotate(-5deg); }
            50% { transform: translate(3px, -3px) rotate(5deg); }
            75% { transform: translate(-3px, 3px) rotate(-5deg); }
        }

        .dice-display.win {
            border-color: var(--green);
            color: var(--green);
            box-shadow: 0 0 40px var(--green-glow);
        }

        .dice-display.lose {
            border-color: var(--red);
            color: var(--red);
            box-shadow: 0 0 40px var(--red-glow);
        }

        .prediction-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .pred-btn {
            flex: 1;
            padding: 15px 10px;
            border: 2px solid var(--border);
            border-radius: 12px;
            background: var(--bg-panel);
            color: var(--text);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .pred-btn:hover {
            border-color: rgba(244, 196, 48, 0.3);
        }

        .pred-btn.selected {
            border-color: var(--gold);
            background: linear-gradient(135deg, rgba(244, 196, 48, 0.15), rgba(244, 196, 48, 0.05));
            box-shadow: 0 0 20px var(--gold-glow);
        }

        .pred-btn .multiplier {
            font-family: 'Space Mono', monospace;
            color: var(--green);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        /* ======================= COINFLIP ======================= */
        .coin-container {
            perspective: 1000px;
            margin-bottom: 25px;
            display: flex;
            justify-content: center;
        }

        .coin {
            width: 140px;
            height: 140px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.1s;
        }

        .coin.flipping {
            animation: coinFlip 1s ease-in-out forwards;
        }

        .coin.flipping-tails {
            animation: coinFlipTails 1s ease-in-out forwards;
        }

        @keyframes coinFlip {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(1800deg); }
        }

        @keyframes coinFlipTails {
            0% { transform: rotateY(0deg); }
            100% { transform: rotateY(1980deg); }
        }

        .coin-side {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3.5rem;
            backface-visibility: hidden;
            border: 4px solid rgba(255,255,255,0.2);
            box-shadow: 
                0 15px 40px rgba(0,0,0,0.4),
                inset 0 2px 10px rgba(255,255,255,0.2);
        }

        .coin-heads {
            background: linear-gradient(145deg, #ffd700 0%, #c9a227 50%, #ffd700 100%);
        }

        .coin-tails {
            background: linear-gradient(145deg, #e8e8e8 0%, #a0a0a0 50%, #e8e8e8 100%);
            transform: rotateY(180deg);
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .choice-btn {
            flex: 1;
            padding: 20px 15px;
            border: 2px solid var(--border);
            border-radius: 15px;
            background: var(--bg-panel);
            color: var(--text);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .choice-btn:hover {
            transform: translateY(-3px);
            border-color: rgba(244, 196, 48, 0.3);
        }

        .choice-btn.selected {
            border-color: var(--gold);
            background: linear-gradient(135deg, rgba(244, 196, 48, 0.15), rgba(244, 196, 48, 0.05));
            box-shadow: 0 5px 25px var(--gold-glow);
            transform: translateY(-3px);
        }

        .choice-btn .icon {
            font-size: 2.5rem;
            margin-bottom: 8px;
        }

        .choice-btn .multiplier {
            font-family: 'Space Mono', monospace;
            color: var(--gold);
            font-size: 0.85rem;
            margin-top: 5px;
        }

        /* ======================= BLACKJACK ======================= */
        .bj-table {
            margin-bottom: 15px;
        }

        .bj-hand {
            background: linear-gradient(135deg, rgba(0, 100, 0, 0.2), rgba(0, 60, 0, 0.3));
            border: 2px solid rgba(0, 200, 0, 0.2);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 12px;
        }

        .bj-label {
            color: var(--text-muted);
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .bj-cards {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 10px;
            min-height: 75px;
        }

        .bj-card {
            width: 50px;
            height: 70px;
            background: linear-gradient(145deg, #fff, #f0f0f0);
            border: 2px solid #333;
            border-radius: 6px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            font-weight: 700;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            animation: cardDeal 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes cardDeal {
            from {
                opacity: 0;
                transform: translateY(-30px) rotateX(90deg);
            }
            to {
                opacity: 1;
                transform: translateY(0) rotateX(0);
            }
        }

        .bj-card.red { color: #cc0000; }
        .bj-card.black { color: #000; }

        .bj-card.hidden {
            background: linear-gradient(145deg, #1a237e, #0d1442);
            border-color: #283593;
        }

        .bj-card.hidden::before {
            content: '?';
            font-size: 2rem;
            color: rgba(255,255,255,0.3);
        }

        .bj-card .card-value { font-size: 1rem; }
        .bj-card .card-suit { font-size: 0.9rem; }

        .bj-score {
            font-family: 'Space Mono', monospace;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--gold);
        }

        .bj-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .bj-actions .btn {
            padding: 12px;
        }

        /* ======================= CRASH ======================= */
        .crash-display {
            height: 200px;
            background: linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.3));
            border: 2px solid var(--border);
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }

        .crash-graph {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .crash-multiplier {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Bebas Neue', sans-serif;
            font-size: 4rem;
            color: var(--green);
            text-shadow: 0 0 30px var(--green-glow);
            z-index: 10;
            transition: all 0.1s;
        }

        .crash-multiplier.crashed {
            color: var(--red);
            text-shadow: 0 0 30px var(--red-glow);
            animation: crashShake 0.5s ease-out;
        }

        @keyframes crashShake {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            25% { transform: translate(-45%, -50%) scale(1.1); }
            75% { transform: translate(-55%, -50%) scale(1.1); }
        }

        .crash-line {
            position: absolute;
            bottom: 20px;
            left: 20px;
            height: 3px;
            background: var(--green);
            box-shadow: 0 0 10px var(--green);
            transform-origin: left;
            transition: width 0.05s linear;
        }

        .crash-actions {
            display: flex;
            gap: 10px;
        }

        .crash-actions .btn {
            flex: 1;
        }

        /* ======================= ROULETTE ======================= */
        .roulette-container {
            margin-bottom: 20px;
        }

        .roulette-wheel-container {
            position: relative;
            width: 220px;
            height: 220px;
            margin: 0 auto 20px;
        }

        .roulette-wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                #e74c3c 0deg 10deg,
                #1a1a1a 10deg 20deg,
                #e74c3c 20deg 30deg,
                #1a1a1a 30deg 40deg,
                #e74c3c 40deg 50deg,
                #1a1a1a 50deg 60deg,
                #e74c3c 60deg 70deg,
                #1a1a1a 70deg 80deg,
                #e74c3c 80deg 90deg,
                #1a1a1a 90deg 100deg,
                #2ecc71 100deg 110deg,
                #1a1a1a 110deg 120deg,
                #e74c3c 120deg 130deg,
                #1a1a1a 130deg 140deg,
                #e74c3c 140deg 150deg,
                #1a1a1a 150deg 160deg,
                #e74c3c 160deg 170deg,
                #1a1a1a 170deg 180deg,
                #e74c3c 180deg 190deg,
                #1a1a1a 190deg 200deg,
                #e74c3c 200deg 210deg,
                #1a1a1a 210deg 220deg,
                #e74c3c 220deg 230deg,
                #1a1a1a 230deg 240deg,
                #e74c3c 240deg 250deg,
                #1a1a1a 250deg 260deg,
                #e74c3c 260deg 270deg,
                #1a1a1a 270deg 280deg,
                #e74c3c 280deg 290deg,
                #1a1a1a 290deg 300deg,
                #e74c3c 300deg 310deg,
                #1a1a1a 310deg 320deg,
                #e74c3c 320deg 330deg,
                #1a1a1a 330deg 340deg,
                #e74c3c 340deg 350deg,
                #1a1a1a 350deg 360deg
            );
            border: 4px solid var(--gold);
            box-shadow: 
                0 0 30px var(--gold-glow),
                inset 0 0 50px rgba(0,0,0,0.5);
            transition: transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .roulette-wheel.spinning {
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .roulette-pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 12px solid transparent;
            border-right: 12px solid transparent;
            border-top: 25px solid var(--gold);
            filter: drop-shadow(0 3px 5px rgba(0,0,0,0.5));
            z-index: 10;
        }

        .roulette-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(145deg, #2a2a2a, #1a1a1a);
            border: 3px solid var(--gold);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.2rem;
            color: var(--gold);
        }

        .roulette-bets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .roulette-bet-btn {
            padding: 15px 10px;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: var(--bg-panel);
            color: var(--text);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .roulette-bet-btn:hover {
            transform: translateY(-2px);
        }

        .roulette-bet-btn.selected {
            box-shadow: 0 5px 20px rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        .roulette-bet-btn.red {
            border-color: var(--red);
            color: var(--red);
        }

        .roulette-bet-btn.red.selected {
            background: rgba(255, 49, 49, 0.2);
            box-shadow: 0 5px 20px var(--red-glow);
        }

        .roulette-bet-btn.black {
            border-color: #666;
            color: #ccc;
        }

        .roulette-bet-btn.black.selected {
            background: rgba(100, 100, 100, 0.3);
        }

        .roulette-bet-btn.green {
            border-color: var(--green);
            color: var(--green);
        }

        .roulette-bet-btn.green.selected {
            background: rgba(57, 255, 20, 0.2);
            box-shadow: 0 5px 20px var(--green-glow);
        }

        .roulette-bet-btn .multiplier {
            font-family: 'Space Mono', monospace;
            font-size: 0.8rem;
            margin-top: 3px;
            opacity: 0.7;
        }

        /* ======================= WHEEL OF FORTUNE ======================= */
        .wheel-fortune-container {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto 25px;
        }

        .wheel-fortune {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            border: 6px solid var(--gold);
            box-shadow: 
                0 0 40px var(--gold-glow),
                inset 0 0 30px rgba(0,0,0,0.5);
            transition: transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .wheel-segment {
            position: absolute;
            width: 50%;
            height: 50%;
            top: 0;
            left: 50%;
            transform-origin: 0% 100%;
            clip-path: polygon(0% 100%, 100% 0%, 100% 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .wheel-segment span {
            position: absolute;
            font-family: 'Bebas Neue', sans-serif;
            font-size: 0.9rem;
            color: #fff;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
            transform: rotate(22.5deg) translateY(-50px);
        }

        .wheel-pointer-fortune {
            position: absolute;
            right: -15px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 15px solid transparent;
            border-bottom: 15px solid transparent;
            border-right: 30px solid var(--gold);
            filter: drop-shadow(-3px 0 5px rgba(0,0,0,0.5));
            z-index: 10;
        }

        .wheel-center-fortune {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(145deg, var(--gold), var(--gold-dark));
            border: 3px solid #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
            z-index: 5;
        }

        /* ======================= MODAL ======================= */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: modalFadeIn 0.3s;
        }

        .modal-overlay.active {
            display: flex;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 25px;
            max-width: 400px;
            width: 100%;
            animation: modalSlideIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes modalSlideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            letter-spacing: 2px;
            color: var(--gold);
        }

        .modal-close {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text-muted);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            border-color: var(--red);
            color: var(--red);
        }

        .stats-grid {
            display: grid;
            gap: 12px;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .stat-label {
            color: var(--text-muted);
            font-weight: 600;
        }

        .stat-value {
            font-family: 'Space Mono', monospace;
            font-weight: 700;
            color: var(--gold);
        }

        .stat-value.positive { color: var(--green); }
        .stat-value.negative { color: var(--red); }

        .reset-btn {
            margin-top: 20px;
            width: 100%;
            padding: 12px;
            background: transparent;
            border: 1px solid var(--red);
            border-radius: 10px;
            color: var(--red);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }

        .reset-btn:hover {
            background: rgba(255, 49, 49, 0.1);
        }

        /* Win animation overlay */
        .win-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1500;
            display: none;
        }

        .win-overlay.active {
            display: block;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        /* RESPONSIVE */
        @media (max-width: 480px) {
            .container {
                padding: 0 10px;
            }

            .header-content {
                gap: 10px;
            }

            .balance-display {
                padding: 6px 12px;
            }

            .card {
                padding: 15px;
            }

            .slots-display {
                padding: 15px;
                gap: 8px;
            }

            .reel {
                width: 65px;
                height: 85px;
                font-size: 2.2rem;
            }

            .mines-grid {
                gap: 6px;
            }

            .mine-tile {
                font-size: 1.5rem;
            }

            .dice-display {
                width: 100px;
                height: 100px;
                font-size: 2.5rem;
            }

            .coin {
                width: 110px;
                height: 110px;
            }

            .coin-side {
                font-size: 2.5rem;
            }

            .choice-btn {
                padding: 15px 10px;
            }

            .choice-btn .icon {
                font-size: 2rem;
            }

            .bj-card {
                width: 42px;
                height: 60px;
                font-size: 0.9rem;
            }

            .roulette-wheel-container {
                width: 180px;
                height: 180px;
            }

            .crash-multiplier {
                font-size: 3rem;
            }

            .wheel-fortune-container {
                width: 230px;
                height: 230px;
            }
        }

        @media (min-width: 768px) {
            .game-container {
                padding: 20px 0 40px;
            }

            .card {
                padding: 25px;
            }

            .slots-display {
                gap: 20px;
            }

            .reel {
                width: 100px;
                height: 120px;
                font-size: 4rem;
            }

            .mines-grid {
                gap: 12px;
                max-width: 400px;
            }

            .mine-tile {
                font-size: 2.2rem;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-dark);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gold-dark);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gold);
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div class="bg-grid"></div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">ROYAL V5</div>
                <div class="header-right">
                    <div class="balance-display">
                        <span class="balance-icon">üí∞</span>
                        <span class="balance-amount" id="balance">0</span>
                    </div>
                    <button class="stats-btn" onclick="toggleStats()">üìä</button>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <div class="nav-wrapper" id="navWrapper">
                <div class="nav-item active" data-game="slots"><span>üé∞ Slots</span></div>
                <div class="nav-item" data-game="mines"><span>üíé Mines</span></div>
                <div class="nav-item" data-game="dice"><span>üé≤ Dice</span></div>
                <div class="nav-item" data-game="coinflip"><span>ü™ô Flip</span></div>
                <div class="nav-item" data-game="blackjack"><span>üÉè 21</span></div>
                <div class="nav-item" data-game="crash"><span>üìà Crash</span></div>
                <div class="nav-item" data-game="roulette"><span>üé° Roulette</span></div>
                <div class="nav-item" data-game="wheel"><span>üéØ Wheel</span></div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="game-container">
            <!-- SLOTS -->
            <div class="game-scene active" id="slots">
                <div class="card">
                    <div class="slots-display">
                        <div class="reel" id="reel1"><span class="reel-symbol">üçí</span></div>
                        <div class="reel" id="reel2"><span class="reel-symbol">üçí</span></div>
                        <div class="reel" id="reel3"><span class="reel-symbol">üçí</span></div>
                    </div>
                    <div class="slots-multiplier">
                        777 = <span>x50</span> | 3x = <span>x10</span> | 2x = <span>x2</span>
                    </div>
                    <div id="slotsStatus" class="status-message info">Spin to win!</div>
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setSlotsBet(50)">50$</button>
                        <button class="quick-bet" onclick="setSlotsBet(100)">100$</button>
                        <button class="quick-bet" onclick="setSlotsBet(250)">250$</button>
                        <button class="quick-bet" onclick="setSlotsBet(500)">500$</button>
                    </div>
                    <div class="input-group">
                        <label>Bet</label>
                        <input type="number" id="slotsBet" value="50" min="10">
                    </div>
                    <button class="btn btn-primary" id="slotsBtn" onclick="game.slots.spin()">
                        Spin
                    </button>
                </div>
            </div>

            <!-- MINES -->
            <div class="game-scene" id="mines">
                <div class="card">
                    <div class="mines-stats" id="minesStats" style="display:none">
                        <div class="mines-stat">
                            <div class="mines-stat-label">Found</div>
                            <div class="mines-stat-value" id="minesFound">0</div>
                        </div>
                        <div class="mines-stat">
                            <div class="mines-stat-label">Multiplier</div>
                            <div class="mines-stat-value" id="minesMult">1.00x</div>
                        </div>
                        <div class="mines-stat">
                            <div class="mines-stat-label">Profit</div>
                            <div class="mines-stat-value" id="minesProfit">$0</div>
                        </div>
                    </div>
                    <div class="mines-grid" id="minesGrid"></div>
                    <div id="minesStatus" class="status-message info">Find gems, avoid bombs!</div>
                </div>
                <div class="card">
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="minesBet" value="100" min="10">
                    </div>
                    <div class="input-group">
                        <label>Bombs (1-24)</label>
                        <input type="number" id="minesBombs" value="3" min="1" max="24">
                    </div>
                    <button class="btn btn-primary" id="minesStartBtn" onclick="game.mines.start()">
                        Start Game
                    </button>
                    <button class="btn btn-secondary" id="minesCashBtn" onclick="game.mines.cashout()" style="display:none;margin-top:10px">
                        Cashout: $0
                    </button>
                </div>
            </div>

            <!-- DICE -->
            <div class="game-scene" id="dice">
                <div class="card">
                    <div class="dice-container">
                        <div class="dice-display" id="diceDisplay">?</div>
                    </div>
                    <div id="diceStatus" class="status-message info">Pick over or under 50</div>
                    <div class="prediction-row">
                        <div class="pred-btn" onclick="game.dice.selectPred('under', this)">
                            <div>Under 50</div>
                            <div class="multiplier">x1.98</div>
                        </div>
                        <div class="pred-btn" onclick="game.dice.selectPred('over', this)">
                            <div>Over 50</div>
                            <div class="multiplier">x1.98</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setDiceBet(50)">50$</button>
                        <button class="quick-bet" onclick="setDiceBet(100)">100$</button>
                        <button class="quick-bet" onclick="setDiceBet(250)">250$</button>
                        <button class="quick-bet" onclick="setDiceBet(500)">MAX</button>
                    </div>
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="diceBet" value="100" min="10">
                    </div>
                    <button class="btn btn-primary" id="diceBtn" onclick="game.dice.roll()" disabled>
                        Roll Dice
                    </button>
                </div>
            </div>

            <!-- COINFLIP -->
            <div class="game-scene" id="coinflip">
                <div class="card">
                    <div class="coin-container">
                        <div class="coin" id="coin">
                            <div class="coin-side coin-heads">üëë</div>
                            <div class="coin-side coin-tails">‚ö°</div>
                        </div>
                    </div>
                    <div id="flipStatus" class="status-message info">Choose heads or tails</div>
                    <div class="choice-buttons">
                        <div class="choice-btn" onclick="game.coinflip.choose('heads', this)">
                            <div class="icon">üëë</div>
                            <div>Heads</div>
                            <div class="multiplier">x1.98</div>
                        </div>
                        <div class="choice-btn" onclick="game.coinflip.choose('tails', this)">
                            <div class="icon">‚ö°</div>
                            <div>Tails</div>
                            <div class="multiplier">x1.98</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setFlipBet(50)">50$</button>
                        <button class="quick-bet" onclick="setFlipBet(100)">100$</button>
                        <button class="quick-bet" onclick="setFlipBet(250)">250$</button>
                        <button class="quick-bet" onclick="setFlipBet(500)">MAX</button>
                    </div>
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="flipBet" value="100" min="10">
                    </div>
                    <button class="btn btn-primary" id="flipBtn" onclick="game.coinflip.flip()" disabled>
                        Flip Coin
                    </button>
                </div>
            </div>

            <!-- BLACKJACK -->
            <div class="game-scene" id="blackjack">
                <div class="card">
                    <div class="bj-table">
                        <div class="bj-hand">
                            <div class="bj-label">Dealer</div>
                            <div class="bj-cards" id="dealerCards"></div>
                            <div class="bj-score" id="dealerScore">-</div>
                        </div>
                        <div class="bj-hand">
                            <div class="bj-label">Your Hand</div>
                            <div class="bj-cards" id="playerCards"></div>
                            <div class="bj-score" id="playerScore">-</div>
                        </div>
                    </div>
                    <div id="bjStatus" class="status-message info">Place your bet to start</div>
                </div>
                <div class="card">
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="bjBet" value="100" min="10">
                    </div>
                    <button class="btn btn-primary" id="bjStartBtn" onclick="game.blackjack.start()">
                        Deal Cards
                    </button>
                    <div class="bj-actions" id="bjActions" style="display:none;margin-top:10px">
                        <button class="btn btn-primary" onclick="game.blackjack.hit()">Hit</button>
                        <button class="btn btn-secondary" onclick="game.blackjack.stand()">Stand</button>
                    </div>
                </div>
            </div>

            <!-- CRASH -->
            <div class="game-scene" id="crash">
                <div class="card">
                    <div class="crash-display" id="crashDisplay">
                        <div class="crash-multiplier" id="crashMult">1.00x</div>
                        <div class="crash-line" id="crashLine"></div>
                    </div>
                    <div id="crashStatus" class="status-message info">Place bet and watch it grow!</div>
                </div>
                <div class="card">
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setCrashBet(50)">50$</button>
                        <button class="quick-bet" onclick="setCrashBet(100)">100$</button>
                        <button class="quick-bet" onclick="setCrashBet(250)">250$</button>
                        <button class="quick-bet" onclick="setCrashBet(500)">MAX</button>
                    </div>
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="crashBet" value="100" min="10">
                    </div>
                    <div class="crash-actions">
                        <button class="btn btn-primary" id="crashStartBtn" onclick="game.crash.start()">
                            Start
                        </button>
                        <button class="btn btn-secondary" id="crashCashBtn" onclick="game.crash.cashout()" style="display:none">
                            Cashout
                        </button>
                    </div>
                </div>
            </div>

            <!-- ROULETTE -->
            <div class="game-scene" id="roulette">
                <div class="card">
                    <div class="roulette-container">
                        <div class="roulette-wheel-container">
                            <div class="roulette-pointer"></div>
                            <div class="roulette-wheel" id="rouletteWheel"></div>
                            <div class="roulette-center" id="rouletteResult">?</div>
                        </div>
                    </div>
                    <div id="rouletteStatus" class="status-message info">Choose your bet</div>
                    <div class="roulette-bets">
                        <button class="roulette-bet-btn red" onclick="game.roulette.selectBet('red', this)">
                            <div>Red</div>
                            <div class="multiplier">x2</div>
                        </button>
                        <button class="roulette-bet-btn green" onclick="game.roulette.selectBet('green', this)">
                            <div>Green</div>
                            <div class="multiplier">x14</div>
                        </button>
                        <button class="roulette-bet-btn black" onclick="game.roulette.selectBet('black', this)">
                            <div>Black</div>
                            <div class="multiplier">x2</div>
                        </button>
                    </div>
                </div>
                <div class="card">
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setRouletteBet(50)">50$</button>
                        <button class="quick-bet" onclick="setRouletteBet(100)">100$</button>
                        <button class="quick-bet" onclick="setRouletteBet(250)">250$</button>
                        <button class="quick-bet" onclick="setRouletteBet(500)">MAX</button>
                    </div>
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="rouletteBet" value="100" min="10">
                    </div>
                    <button class="btn btn-primary" id="rouletteBtn" onclick="game.roulette.spin()" disabled>
                        Spin Wheel
                    </button>
                </div>
            </div>

            <!-- WHEEL OF FORTUNE -->
            <div class="game-scene" id="wheel">
                <div class="card">
                    <div class="wheel-fortune-container">
                        <div class="wheel-pointer-fortune"></div>
                        <div class="wheel-fortune" id="wheelFortune">
                            <svg viewBox="0 0 100 100" style="width:100%;height:100%">
                                <!-- Segments will be drawn by JS -->
                            </svg>
                        </div>
                        <div class="wheel-center-fortune">üéØ</div>
                    </div>
                    <div id="wheelStatus" class="status-message info">Spin to win multipliers!</div>
                </div>
                <div class="card">
                    <div class="quick-bets">
                        <button class="quick-bet" onclick="setWheelBet(50)">50$</button>
                        <button class="quick-bet" onclick="setWheelBet(100)">100$</button>
                        <button class="quick-bet" onclick="setWheelBet(250)">250$</button>
                        <button class="quick-bet" onclick="setWheelBet(500)">MAX</button>
                    </div>
                    <div class="input-group">
                        <label>Bet Amount</label>
                        <input type="number" id="wheelBet" value="100" min="10">
                    </div>
                    <button class="btn btn-secondary" id="wheelBtn" onclick="game.wheel.spin()">
                        Spin Wheel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal-overlay" id="statsModal">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title">Statistics</h2>
                <button class="modal-close" onclick="toggleStats()">‚úï</button>
            </div>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Total Wagered</span>
                    <span class="stat-value" id="statWagered">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Won</span>
                    <span class="stat-value positive" id="statWon">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Lost</span>
                    <span class="stat-value negative" id="statLost">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Net Profit</span>
                    <span class="stat-value" id="statProfit">$0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Games Played</span>
                    <span class="stat-value" id="statGames">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Win Rate</span>
                    <span class="stat-value" id="statWinRate">0%</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Biggest Win</span>
                    <span class="stat-value positive" id="statBigWin">$0</span>
                </div>
            </div>
            <button class="reset-btn" onclick="resetStats()">Reset All Data</button>
        </div>
    </div>

    <div class="win-overlay" id="winOverlay"></div>

    <script>
        // ============ DATABASE (LocalStorage) ============
        const DB = {
            defaultData: {
                balance: 1000,
                stats: {
                    wagered: 0,
                    won: 0,
                    lost: 0,
                    games: 0,
                    wins: 0,
                    biggestWin: 0
                }
            },

            load() {
                const data = localStorage.getItem('royalCasinoV5');
                if (data) {
                    return JSON.parse(data);
                }
                return { ...this.defaultData };
            },

            save(data) {
                localStorage.setItem('royalCasinoV5', JSON.stringify(data));
            },

            getBalance() {
                return this.load().balance;
            },

            setBalance(amount) {
                const data = this.load();
                data.balance = Math.max(0, Math.round(amount));
                this.save(data);
                updateBalanceDisplay();
            },

            addBalance(amount) {
                this.setBalance(this.getBalance() + amount);
            },

            getStats() {
                return this.load().stats;
            },

            updateStats(wagered, won, isWin) {
                const data = this.load();
                data.stats.wagered += wagered;
                data.stats.games += 1;
                if (isWin) {
                    data.stats.won += won;
                    data.stats.wins += 1;
                    if (won > data.stats.biggestWin) {
                        data.stats.biggestWin = won;
                    }
                } else {
                    data.stats.lost += wagered;
                }
                this.save(data);
            },

            reset() {
                localStorage.removeItem('royalCasinoV5');
                location.reload();
            }
        };

        // ============ UI HELPERS ============
        function updateBalanceDisplay() {
            document.getElementById('balance').textContent = DB.getBalance().toLocaleString();
        }

        function updateStats() {
            const stats = DB.getStats();
            document.getElementById('statWagered').textContent = '$' + stats.wagered.toLocaleString();
            document.getElementById('statWon').textContent = '$' + stats.won.toLocaleString();
            document.getElementById('statLost').textContent = '$' + stats.lost.toLocaleString();
            
            const profit = stats.won - stats.lost;
            const profitEl = document.getElementById('statProfit');
            profitEl.textContent = (profit >= 0 ? '+$' : '-$') + Math.abs(profit).toLocaleString();
            profitEl.className = 'stat-value ' + (profit >= 0 ? 'positive' : 'negative');
            
            document.getElementById('statGames').textContent = stats.games;
            document.getElementById('statWinRate').textContent = stats.games > 0 ? 
                Math.round((stats.wins / stats.games) * 100) + '%' : '0%';
            document.getElementById('statBigWin').textContent = '$' + stats.biggestWin.toLocaleString();
        }

        function toggleStats() {
            const modal = document.getElementById('statsModal');
            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                updateStats();
            }
        }

        function resetStats() {
            if (confirm('Are you sure? This will reset your balance and all statistics.')) {
                DB.reset();
            }
        }

        function showWinAnimation() {
            const overlay = document.getElementById('winOverlay');
            overlay.innerHTML = '';
            overlay.classList.add('active');
            
            const colors = ['#f4c430', '#39ff14', '#00fff7', '#bf00ff', '#ff3131'];
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confetti.style.animation = `confettiFall ${1 + Math.random()}s ease-out forwards`;
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                overlay.appendChild(confetti);
            }
            
            setTimeout(() => {
                overlay.classList.remove('active');
            }, 2000);
        }

        // Add confetti animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes confettiFall {
                0% { transform: translateY(0) rotate(0deg); opacity: 1; }
                100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Quick bet setters
        function setSlotsBet(amount) { document.getElementById('slotsBet').value = Math.min(amount, DB.getBalance()); }
        function setDiceBet(amount) { document.getElementById('diceBet').value = Math.min(amount, DB.getBalance()); }
        function setFlipBet(amount) { document.getElementById('flipBet').value = Math.min(amount, DB.getBalance()); }
        function setCrashBet(amount) { document.getElementById('crashBet').value = Math.min(amount, DB.getBalance()); }
        function setRouletteBet(amount) { document.getElementById('rouletteBet').value = Math.min(amount, DB.getBalance()); }
        function setWheelBet(amount) { document.getElementById('wheelBet').value = Math.min(amount, DB.getBalance()); }

        // ============ NAVIGATION ============
        const navItems = document.querySelectorAll('.nav-item');
        const gameScenes = document.querySelectorAll('.game-scene');

        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const gameName = item.dataset.game;
                
                navItems.forEach(n => n.classList.remove('active'));
                item.classList.add('active');
                
                gameScenes.forEach(scene => {
                    scene.classList.remove('active');
                    if (scene.id === gameName) {
                        scene.classList.add('active');
                    }
                });
            });
        });

        // ============ GAME LOGIC ============
        const game = {
            // ===== SLOTS =====
            slots: {
                symbols: ['üçí', 'üçã', 'üçä', 'üçá', '‚≠ê', 'üíé', '7Ô∏è‚É£'],
                spinning: false,

                spin() {
                    if (this.spinning) return;
                    
                    const bet = parseInt(document.getElementById('slotsBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.spinning = true;
                    DB.addBalance(-bet);

                    const reels = [
                        document.getElementById('reel1'),
                        document.getElementById('reel2'),
                        document.getElementById('reel3')
                    ];

                    // Remove winner class
                    reels.forEach(r => r.classList.remove('winner'));

                    // Start spinning
                    reels.forEach(reel => reel.classList.add('spinning'));

                    // Generate results
                    const results = [];
                    for (let i = 0; i < 3; i++) {
                        results.push(this.symbols[Math.floor(Math.random() * this.symbols.length)]);
                    }

                    // Stop reels sequentially
                    reels.forEach((reel, index) => {
                        setTimeout(() => {
                            reel.classList.remove('spinning');
                            reel.querySelector('.reel-symbol').textContent = results[index];
                            
                            if (index === 2) {
                                this.checkWin(results, bet);
                            }
                        }, 500 + index * 300);
                    });
                },

                checkWin(results, bet) {
                    const statusEl = document.getElementById('slotsStatus');
                    const reels = document.querySelectorAll('.reel');
                    let multiplier = 0;
                    let message = '';

                    // Check for 777
                    if (results.every(r => r === '7Ô∏è‚É£')) {
                        multiplier = 50;
                        message = 'üéâ JACKPOT! 777! ';
                    }
                    // Check for 3 of a kind
                    else if (results[0] === results[1] && results[1] === results[2]) {
                        multiplier = 10;
                        message = 'üéâ THREE OF A KIND! ';
                    }
                    // Check for 2 of a kind
                    else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
                        multiplier = 2;
                        message = '‚ú® Two matching! ';
                    }

                    if (multiplier > 0) {
                        const winnings = bet * multiplier;
                        DB.addBalance(winnings);
                        DB.updateStats(bet, winnings, true);
                        statusEl.className = 'status-message win';
                        statusEl.textContent = message + `Won $${winnings.toLocaleString()}!`;
                        reels.forEach(r => r.classList.add('winner'));
                        if (multiplier >= 10) showWinAnimation();
                    } else {
                        DB.updateStats(bet, 0, false);
                        statusEl.className = 'status-message lose';
                        statusEl.textContent = 'No match. Try again!';
                    }

                    this.spinning = false;
                }
            },

            // ===== MINES =====
            mines: {
                grid: [],
                bombs: [],
                revealed: 0,
                currentBet: 0,
                bombCount: 0,
                isPlaying: false,

                start() {
                    const bet = parseInt(document.getElementById('minesBet').value) || 0;
                    const bombs = parseInt(document.getElementById('minesBombs').value) || 3;

                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');
                    if (bombs < 1 || bombs > 24) return alert('Bombs must be 1-24');

                    this.currentBet = bet;
                    this.bombCount = bombs;
                    this.revealed = 0;
                    this.isPlaying = true;

                    DB.addBalance(-bet);

                    // Generate bomb positions
                    this.bombs = [];
                    while (this.bombs.length < bombs) {
                        const pos = Math.floor(Math.random() * 25);
                        if (!this.bombs.includes(pos)) this.bombs.push(pos);
                    }

                    // Create grid
                    const gridEl = document.getElementById('minesGrid');
                    gridEl.innerHTML = '';
                    this.grid = [];

                    for (let i = 0; i < 25; i++) {
                        const tile = document.createElement('div');
                        tile.className = 'mine-tile';
                        tile.dataset.index = i;
                        tile.onclick = () => this.reveal(i);
                        gridEl.appendChild(tile);
                        this.grid.push(tile);
                    }

                    // Update UI
                    document.getElementById('minesStartBtn').style.display = 'none';
                    document.getElementById('minesCashBtn').style.display = 'block';
                    document.getElementById('minesStats').style.display = 'flex';
                    this.updateStats();

                    document.getElementById('minesStatus').className = 'status-message info';
                    document.getElementById('minesStatus').textContent = 'Click tiles to reveal gems!';
                },

                reveal(index) {
                    if (!this.isPlaying) return;
                    const tile = this.grid[index];
                    if (tile.classList.contains('revealed')) return;

                    tile.classList.add('revealed');

                    if (this.bombs.includes(index)) {
                        // Hit bomb
                        tile.classList.add('bomb');
                        tile.innerHTML = 'üí£';
                        this.gameOver(false);
                    } else {
                        // Found gem
                        tile.classList.add('gem');
                        tile.innerHTML = 'üíé';
                        this.revealed++;
                        this.updateStats();

                        // Check if all gems found
                        if (this.revealed === 25 - this.bombCount) {
                            this.cashout();
                        }
                    }
                },

                getMultiplier() {
                    if (this.revealed === 0) return 1;
                    const safeSpots = 25 - this.bombCount;
                    let mult = 1;
                    for (let i = 0; i < this.revealed; i++) {
                        mult *= safeSpots / (safeSpots - i);
                    }
                    return Math.min(mult * 0.97, 100); // 3% house edge, max 100x
                },

                updateStats() {
                    const mult = this.getMultiplier();
                    const profit = Math.floor(this.currentBet * mult) - this.currentBet;
                    
                    document.getElementById('minesFound').textContent = this.revealed;
                    document.getElementById('minesMult').textContent = mult.toFixed(2) + 'x';
                    document.getElementById('minesProfit').textContent = '$' + profit.toLocaleString();
                    document.getElementById('minesCashBtn').textContent = 
                        `Cashout: $${Math.floor(this.currentBet * mult).toLocaleString()}`;
                },

                cashout() {
                    if (!this.isPlaying || this.revealed === 0) return;
                    
                    const mult = this.getMultiplier();
                    const winnings = Math.floor(this.currentBet * mult);
                    
                    DB.addBalance(winnings);
                    DB.updateStats(this.currentBet, winnings, true);
                    
                    document.getElementById('minesStatus').className = 'status-message win';
                    document.getElementById('minesStatus').textContent = 
                        `Cashed out $${winnings.toLocaleString()}! (${mult.toFixed(2)}x)`;
                    
                    if (mult >= 3) showWinAnimation();
                    this.gameOver(true);
                },

                gameOver(won) {
                    this.isPlaying = false;
                    
                    // Reveal all bombs
                    this.bombs.forEach(pos => {
                        const tile = this.grid[pos];
                        if (!tile.classList.contains('revealed')) {
                            tile.classList.add('revealed', 'bomb', 'disabled');
                            tile.innerHTML = 'üí£';
                        }
                    });

                    // Disable all tiles
                    this.grid.forEach(tile => tile.classList.add('disabled'));

                    if (!won) {
                        DB.updateStats(this.currentBet, 0, false);
                        document.getElementById('minesStatus').className = 'status-message lose';
                        document.getElementById('minesStatus').textContent = 'BOOM! You hit a bomb!';
                    }

                    document.getElementById('minesStartBtn').style.display = 'block';
                    document.getElementById('minesCashBtn').style.display = 'none';
                }
            },

            // ===== DICE =====
            dice: {
                prediction: null,
                rolling: false,

                selectPred(pred, btn) {
                    if (this.rolling) return;
                    
                    document.querySelectorAll('#dice .pred-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    this.prediction = pred;
                    document.getElementById('diceBtn').disabled = false;
                },

                roll() {
                    if (this.rolling || !this.prediction) return;

                    const bet = parseInt(document.getElementById('diceBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.rolling = true;
                    DB.addBalance(-bet);

                    const display = document.getElementById('diceDisplay');
                    display.classList.add('rolling');
                    display.classList.remove('win', 'lose');

                    // Roll animation
                    let count = 0;
                    const rollInterval = setInterval(() => {
                        display.textContent = Math.floor(Math.random() * 100);
                        count++;
                        if (count > 20) {
                            clearInterval(rollInterval);
                            
                            const result = Math.floor(Math.random() * 100);
                            display.textContent = result;
                            display.classList.remove('rolling');

                            const won = (this.prediction === 'under' && result < 50) || 
                                        (this.prediction === 'over' && result > 50);

                            const statusEl = document.getElementById('diceStatus');

                            if (result === 50) {
                                // Exact 50 = lose
                                DB.updateStats(bet, 0, false);
                                display.classList.add('lose');
                                statusEl.className = 'status-message lose';
                                statusEl.textContent = 'Rolled 50! House wins!';
                            } else if (won) {
                                const winnings = Math.floor(bet * 1.98);
                                DB.addBalance(winnings);
                                DB.updateStats(bet, winnings, true);
                                display.classList.add('win');
                                statusEl.className = 'status-message win';
                                statusEl.textContent = `You won $${winnings.toLocaleString()}!`;
                            } else {
                                DB.updateStats(bet, 0, false);
                                display.classList.add('lose');
                                statusEl.className = 'status-message lose';
                                statusEl.textContent = `Rolled ${result}. Better luck next time!`;
                            }

                            this.rolling = false;
                        }
                    }, 50);
                }
            },

            // ===== COINFLIP =====
            coinflip: {
                choice: null,
                flipping: false,

                choose(side, btn) {
                    if (this.flipping) return;
                    
                    document.querySelectorAll('#coinflip .choice-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    this.choice = side;
                    document.getElementById('flipBtn').disabled = false;
                },

                flip() {
                    if (this.flipping || !this.choice) return;

                    const bet = parseInt(document.getElementById('flipBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.flipping = true;
                    DB.addBalance(-bet);

                    const coin = document.getElementById('coin');
                    const result = Math.random() < 0.5 ? 'heads' : 'tails';

                    // Reset transform
                    coin.style.transform = '';
                    coin.classList.remove('flipping', 'flipping-tails');

                    // Force reflow
                    void coin.offsetWidth;

                    // Add animation class
                    coin.classList.add(result === 'heads' ? 'flipping' : 'flipping-tails');

                    setTimeout(() => {
                        const won = result === this.choice;
                        const statusEl = document.getElementById('flipStatus');

                        if (won) {
                            const winnings = Math.floor(bet * 1.98);
                            DB.addBalance(winnings);
                            DB.updateStats(bet, winnings, true);
                            statusEl.className = 'status-message win';
                            statusEl.textContent = `${result.toUpperCase()}! You won $${winnings.toLocaleString()}!`;
                        } else {
                            DB.updateStats(bet, 0, false);
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = `${result.toUpperCase()}! You lost!`;
                        }

                        this.flipping = false;
                    }, 1000);
                }
            },

            // ===== BLACKJACK =====
            blackjack: {
                deck: [],
                playerHand: [],
                dealerHand: [],
                currentBet: 0,
                isPlaying: false,

                createDeck() {
                    const suits = ['‚ô†', '‚ô•', '‚ô¶', '‚ô£'];
                    const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                    this.deck = [];
                    
                    for (const suit of suits) {
                        for (const value of values) {
                            this.deck.push({ suit, value });
                        }
                    }
                    
                    // Shuffle
                    for (let i = this.deck.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
                    }
                },

                getCardValue(hand) {
                    let value = 0;
                    let aces = 0;
                    
                    for (const card of hand) {
                        if (card.value === 'A') {
                            aces++;
                            value += 11;
                        } else if (['K', 'Q', 'J'].includes(card.value)) {
                            value += 10;
                        } else {
                            value += parseInt(card.value);
                        }
                    }
                    
                    while (value > 21 && aces > 0) {
                        value -= 10;
                        aces--;
                    }
                    
                    return value;
                },

                renderCard(card, hidden = false) {
                    if (hidden) {
                        return '<div class="bj-card hidden"></div>';
                    }
                    const isRed = ['‚ô•', '‚ô¶'].includes(card.suit);
                    return `<div class="bj-card ${isRed ? 'red' : 'black'}">
                        <span class="card-value">${card.value}</span>
                        <span class="card-suit">${card.suit}</span>
                    </div>`;
                },

                updateDisplay(hideDealer = true) {
                    const playerCards = document.getElementById('playerCards');
                    const dealerCards = document.getElementById('dealerCards');
                    
                    playerCards.innerHTML = this.playerHand.map(c => this.renderCard(c)).join('');
                    
                    if (hideDealer && this.dealerHand.length > 1) {
                        dealerCards.innerHTML = this.renderCard(this.dealerHand[0]) + 
                            this.renderCard(null, true);
                        document.getElementById('dealerScore').textContent = '?';
                    } else {
                        dealerCards.innerHTML = this.dealerHand.map(c => this.renderCard(c)).join('');
                        document.getElementById('dealerScore').textContent = this.getCardValue(this.dealerHand);
                    }
                    
                    document.getElementById('playerScore').textContent = this.getCardValue(this.playerHand);
                },

                start() {
                    const bet = parseInt(document.getElementById('bjBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.currentBet = bet;
                    this.isPlaying = true;
                    DB.addBalance(-bet);

                    this.createDeck();
                    this.playerHand = [this.deck.pop(), this.deck.pop()];
                    this.dealerHand = [this.deck.pop(), this.deck.pop()];

                    this.updateDisplay(true);

                    document.getElementById('bjStartBtn').style.display = 'none';
                    document.getElementById('bjActions').style.display = 'grid';
                    document.getElementById('bjStatus').className = 'status-message info';
                    document.getElementById('bjStatus').textContent = 'Hit or Stand?';

                    // Check for blackjack
                    if (this.getCardValue(this.playerHand) === 21) {
                        this.stand();
                    }
                },

                hit() {
                    if (!this.isPlaying) return;
                    
                    this.playerHand.push(this.deck.pop());
                    this.updateDisplay(true);

                    const value = this.getCardValue(this.playerHand);
                    if (value > 21) {
                        this.endGame('bust');
                    } else if (value === 21) {
                        this.stand();
                    }
                },

                stand() {
                    if (!this.isPlaying) return;
                    
                    // Dealer draws to 17
                    while (this.getCardValue(this.dealerHand) < 17) {
                        this.dealerHand.push(this.deck.pop());
                    }
                    
                    this.updateDisplay(false);

                    const playerValue = this.getCardValue(this.playerHand);
                    const dealerValue = this.getCardValue(this.dealerHand);

                    if (dealerValue > 21) {
                        this.endGame('dealer_bust');
                    } else if (playerValue > dealerValue) {
                        this.endGame('win');
                    } else if (playerValue < dealerValue) {
                        this.endGame('lose');
                    } else {
                        this.endGame('push');
                    }
                },

                endGame(result) {
                    this.isPlaying = false;
                    this.updateDisplay(false);
                    
                    const statusEl = document.getElementById('bjStatus');
                    let winnings = 0;

                    switch (result) {
                        case 'bust':
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = 'Bust! You went over 21!';
                            DB.updateStats(this.currentBet, 0, false);
                            break;
                        case 'dealer_bust':
                            winnings = this.currentBet * 2;
                            DB.addBalance(winnings);
                            DB.updateStats(this.currentBet, winnings, true);
                            statusEl.className = 'status-message win';
                            statusEl.textContent = `Dealer busts! You won $${winnings.toLocaleString()}!`;
                            break;
                        case 'win':
                            winnings = this.currentBet * 2;
                            DB.addBalance(winnings);
                            DB.updateStats(this.currentBet, winnings, true);
                            statusEl.className = 'status-message win';
                            statusEl.textContent = `You win $${winnings.toLocaleString()}!`;
                            break;
                        case 'lose':
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = 'Dealer wins!';
                            DB.updateStats(this.currentBet, 0, false);
                            break;
                        case 'push':
                            DB.addBalance(this.currentBet);
                            statusEl.className = 'status-message info';
                            statusEl.textContent = 'Push! Bet returned.';
                            break;
                    }

                    document.getElementById('bjStartBtn').style.display = 'block';
                    document.getElementById('bjActions').style.display = 'none';
                }
            },

            // ===== CRASH =====
            crash: {
                multiplier: 1,
                crashPoint: 0,
                currentBet: 0,
                isPlaying: false,
                interval: null,

                start() {
                    const bet = parseInt(document.getElementById('crashBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.currentBet = bet;
                    this.multiplier = 1;
                    this.isPlaying = true;
                    
                    // Generate crash point (house edge)
                    const r = Math.random();
                    this.crashPoint = Math.max(1, 0.99 / (1 - r));
                    
                    DB.addBalance(-bet);

                    document.getElementById('crashStartBtn').style.display = 'none';
                    document.getElementById('crashCashBtn').style.display = 'block';
                    document.getElementById('crashStatus').className = 'status-message info';
                    document.getElementById('crashStatus').textContent = 'Going up! Cash out before crash!';

                    const multEl = document.getElementById('crashMult');
                    const lineEl = document.getElementById('crashLine');
                    multEl.classList.remove('crashed');

                    this.interval = setInterval(() => {
                        this.multiplier += 0.01;
                        multEl.textContent = this.multiplier.toFixed(2) + 'x';
                        lineEl.style.width = Math.min(this.multiplier * 30, 90) + '%';

                        if (this.multiplier >= this.crashPoint) {
                            this.crash();
                        }
                    }, 50);
                },

                cashout() {
                    if (!this.isPlaying) return;
                    
                    clearInterval(this.interval);
                    this.isPlaying = false;

                    const winnings = Math.floor(this.currentBet * this.multiplier);
                    DB.addBalance(winnings);
                    DB.updateStats(this.currentBet, winnings, true);

                    document.getElementById('crashStatus').className = 'status-message win';
                    document.getElementById('crashStatus').textContent = 
                        `Cashed out at ${this.multiplier.toFixed(2)}x! Won $${winnings.toLocaleString()}!`;

                    if (this.multiplier >= 2) showWinAnimation();

                    document.getElementById('crashStartBtn').style.display = 'block';
                    document.getElementById('crashCashBtn').style.display = 'none';
                },

                crash() {
                    clearInterval(this.interval);
                    this.isPlaying = false;

                    const multEl = document.getElementById('crashMult');
                    multEl.textContent = 'CRASH!';
                    multEl.classList.add('crashed');

                    DB.updateStats(this.currentBet, 0, false);

                    document.getElementById('crashStatus').className = 'status-message lose';
                    document.getElementById('crashStatus').textContent = 
                        `Crashed at ${this.crashPoint.toFixed(2)}x!`;

                    document.getElementById('crashStartBtn').style.display = 'block';
                    document.getElementById('crashCashBtn').style.display = 'none';
                }
            },

            // ===== ROULETTE =====
            roulette: {
                selectedBet: null,
                spinning: false,
                // Simplified: 18 red, 18 black, 1 green
                segments: [
                    'red', 'black', 'red', 'black', 'red', 'black', 'red', 'black',
                    'red', 'black', 'green', 'black', 'red', 'black', 'red', 'black',
                    'red', 'black', 'red', 'black', 'red', 'black', 'red', 'black',
                    'red', 'black', 'red', 'black', 'red', 'black', 'red', 'black',
                    'red', 'black', 'red', 'black', 'red'
                ],

                selectBet(bet, btn) {
                    if (this.spinning) return;
                    
                    document.querySelectorAll('.roulette-bet-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    this.selectedBet = bet;
                    document.getElementById('rouletteBtn').disabled = false;
                },

                spin() {
                    if (this.spinning || !this.selectedBet) return;

                    const bet = parseInt(document.getElementById('rouletteBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.spinning = true;
                    DB.addBalance(-bet);

                    const wheel = document.getElementById('rouletteWheel');
                    
                    // Random result
                    const resultIndex = Math.floor(Math.random() * 37);
                    const result = resultIndex === 0 ? 'green' : (resultIndex % 2 === 0 ? 'red' : 'black');
                    
                    // Calculate rotation (5-8 full spins + result position)
                    const spins = 5 + Math.random() * 3;
                    const segmentAngle = 360 / 37;
                    const resultAngle = resultIndex * segmentAngle;
                    const totalRotation = spins * 360 + resultAngle;

                    wheel.style.transform = `rotate(${totalRotation}deg)`;
                    wheel.classList.add('spinning');

                    document.getElementById('rouletteStatus').className = 'status-message info';
                    document.getElementById('rouletteStatus').textContent = 'Spinning...';

                    setTimeout(() => {
                        wheel.classList.remove('spinning');
                        
                        const resultEl = document.getElementById('rouletteResult');
                        resultEl.textContent = result === 'green' ? '0' : (result === 'red' ? 'R' : 'B');
                        resultEl.style.color = result === 'green' ? 'var(--green)' : 
                                               (result === 'red' ? 'var(--red)' : '#ccc');

                        const statusEl = document.getElementById('rouletteStatus');
                        
                        if (result === this.selectedBet) {
                            const mult = result === 'green' ? 14 : 2;
                            const winnings = bet * mult;
                            DB.addBalance(winnings);
                            DB.updateStats(bet, winnings, true);
                            statusEl.className = 'status-message win';
                            statusEl.textContent = `${result.toUpperCase()}! You won $${winnings.toLocaleString()}!`;
                            if (result === 'green') showWinAnimation();
                        } else {
                            DB.updateStats(bet, 0, false);
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = `${result.toUpperCase()}! You lost!`;
                        }

                        this.spinning = false;
                    }, 5000);
                }
            },

            // ===== WHEEL OF FORTUNE =====
            wheel: {
                spinning: false,
                segments: [
                    { mult: 0, color: '#1a1a1a', label: '0x' },
                    { mult: 1.5, color: '#3498db', label: '1.5x' },
                    { mult: 0.5, color: '#e74c3c', label: '0.5x' },
                    { mult: 2, color: '#2ecc71', label: '2x' },
                    { mult: 0, color: '#1a1a1a', label: '0x' },
                    { mult: 1.2, color: '#9b59b6', label: '1.2x' },
                    { mult: 3, color: '#f39c12', label: '3x' },
                    { mult: 0.5, color: '#e74c3c', label: '0.5x' },
                    { mult: 1.5, color: '#3498db', label: '1.5x' },
                    { mult: 5, color: '#f4c430', label: '5x' },
                    { mult: 0, color: '#1a1a1a', label: '0x' },
                    { mult: 2, color: '#2ecc71', label: '2x' },
                ],

                init() {
                    this.drawWheel();
                },

                drawWheel() {
                    const wheel = document.getElementById('wheelFortune');
                    const svg = wheel.querySelector('svg');
                    const segments = this.segments;
                    const segmentAngle = 360 / segments.length;
                    
                    let html = '';
                    segments.forEach((seg, i) => {
                        const startAngle = i * segmentAngle - 90;
                        const endAngle = (i + 1) * segmentAngle - 90;
                        
                        const startRad = (startAngle * Math.PI) / 180;
                        const endRad = (endAngle * Math.PI) / 180;
                        
                        const x1 = 50 + 45 * Math.cos(startRad);
                        const y1 = 50 + 45 * Math.sin(startRad);
                        const x2 = 50 + 45 * Math.cos(endRad);
                        const y2 = 50 + 45 * Math.sin(endRad);
                        
                        const largeArc = segmentAngle > 180 ? 1 : 0;
                        
                        html += `<path d="M50,50 L${x1},${y1} A45,45 0 ${largeArc},1 ${x2},${y2} Z" 
                                 fill="${seg.color}" stroke="#333" stroke-width="0.5"/>`;
                        
                        // Add text
                        const midAngle = ((startAngle + endAngle) / 2 * Math.PI) / 180;
                        const textX = 50 + 32 * Math.cos(midAngle);
                        const textY = 50 + 32 * Math.sin(midAngle);
                        const textRotate = (startAngle + endAngle) / 2 + 90;
                        
                        html += `<text x="${textX}" y="${textY}" fill="white" font-size="5" 
                                 font-family="Bebas Neue" text-anchor="middle" 
                                 transform="rotate(${textRotate}, ${textX}, ${textY})">${seg.label}</text>`;
                    });
                    
                    svg.innerHTML = html;
                },

                spin() {
                    if (this.spinning) return;

                    const bet = parseInt(document.getElementById('wheelBet').value) || 0;
                    if (bet < 10) return alert('Minimum bet is $10');
                    if (bet > DB.getBalance()) return alert('Insufficient balance');

                    this.spinning = true;
                    DB.addBalance(-bet);

                    const wheel = document.getElementById('wheelFortune');
                    const resultIndex = Math.floor(Math.random() * this.segments.length);
                    const segment = this.segments[resultIndex];
                    
                    // Calculate rotation
                    const spins = 5 + Math.random() * 3;
                    const segmentAngle = 360 / this.segments.length;
                    const targetAngle = 360 - (resultIndex * segmentAngle + segmentAngle / 2);
                    const totalRotation = spins * 360 + targetAngle;

                    wheel.style.transition = 'transform 5s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
                    wheel.style.transform = `rotate(${totalRotation}deg)`;

                    document.getElementById('wheelStatus').className = 'status-message info';
                    document.getElementById('wheelStatus').textContent = 'Spinning...';

                    setTimeout(() => {
                        const statusEl = document.getElementById('wheelStatus');
                        
                        if (segment.mult > 1) {
                            const winnings = Math.floor(bet * segment.mult);
                            DB.addBalance(winnings);
                            DB.updateStats(bet, winnings, true);
                            statusEl.className = 'status-message win';
                            statusEl.textContent = `${segment.label}! You won $${winnings.toLocaleString()}!`;
                            if (segment.mult >= 3) showWinAnimation();
                        } else if (segment.mult > 0) {
                            const winnings = Math.floor(bet * segment.mult);
                            DB.addBalance(winnings);
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = `${segment.label}! Returned $${winnings.toLocaleString()}`;
                            DB.updateStats(bet, 0, false);
                        } else {
                            DB.updateStats(bet, 0, false);
                            statusEl.className = 'status-message lose';
                            statusEl.textContent = `${segment.label}! You lost!`;
                        }

                        this.spinning = false;
                        
                        // Reset wheel transform for next spin
                        setTimeout(() => {
                            wheel.style.transition = 'none';
                            wheel.style.transform = `rotate(${totalRotation % 360}deg)`;
                        }, 100);
                    }, 5000);
                }
            }
        };

        // ============ INIT ============
        document.addEventListener('DOMContentLoaded', () => {
            updateBalanceDisplay();
            
            // Initialize mines grid placeholder
            const minesGrid = document.getElementById('minesGrid');
            for (let i = 0; i < 25; i++) {
                const tile = document.createElement('div');
                tile.className = 'mine-tile disabled';
                minesGrid.appendChild(tile);
            }

            // Initialize wheel
            game.wheel.init();

            // Auto-save balance check (ensure minimum balance)
            if (DB.getBalance() <= 0) {
                DB.setBalance(1000);
                alert('Your balance was reset to $1,000!');
            }
        });

        // Prevent zoom on double tap
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - (window.lastTap || 0) < 300) {
                e.preventDefault();
            }
            window.lastTap = now;
        }, { passive: false });
    </script>
</body>
</html>
